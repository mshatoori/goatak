### **عنوان طرح: سامانه آگاهی وضعیتی تاکتیکی**

### **2\) مقدمه:**

به طور کلی آگاهی وضعیتی توانایی شناسایی، پردازش و درک عناصر مهم اطلاعاتی در مورد آنچه در اطراف اتفاق می افتد، برای تصمیم گیری آگاهانه است. این توانایی شامل آگاهی از محیط اطراف، درک زمینه‌های کلی‌تر موقعیت، و توانایی پیش‌بینی تغییرات و تحولات بالقوه است. آگاهی وضعیتی در زمینه‌های مختلف از جمله عملیات نظامی، واکنش به موقعیت‌های اضطراری (مثل آتش‌نشانی و پلیس)، هوانوردی و بسیاری موارد دیگر ضروری است. با حفظ سطح بالایی از آگاهی وضعیتی، افراد و سازمان ها می توانند تصمیمات بهتری بگیرند، به رویدادهای غیرمنتظره به طور موثر پاسخ دهند و مخاطرات را کاهش دهند.

در زمینه‌ی عملیات‌های نظامی آگاهی وضعیتی تاکتیکی یک قابلیت حیاتی برای نیروهای مسلح است. چنین قابلیتی، فرماندهان و نیروهای تحت امر آنان را قادر می سازد تا وضعیت فعلی میدان نبرد، از جمله موقعیت و فعالیت های نیروهای دوست و دشمن، و همچنین وضعیت زمین و شرایط آب و هوایی را بهتر درک کنند. این اطلاعات برای تصمیم گیری آگاهانه در مورد نحوه انجام عملیات و دستیابی به اهداف ماموریت ضروری است.

جنگ‌های مدرن مستلزم استقرار تعداد زیادی حسگر در تجهیزات و صحنه نبرد هستند. داده‌های صحنه‌ی نبرد توسط تجهیزاتی نظیر رادار، سونار، ویدئو و سنسورهای مادون‌قرمز توسط سیستم‌های هوابرد، ماهوارههای نظارتی، وسایل بدون سرنشین هوایی (UAV) و زمینی (UGV)، کشتیها و سربازان درمیدان نبرد جمعآوری میشوند. این مقادیر عظیم از داده به سطوح بالاتر در قالب توزیعی، تحویل داده می‌شود. تجمیع و پردازش این حجم از داده دارای چالشهایی از قبیل توان پردازشی، مقیاس‌پذیری و پاسخ بی‌درنگ و به موقع برای استفاده از آن‌ها در صحنه نبرد است.

در سال‌های اخیر، علاقه فزاینده‌ای به توسعه سامانه آگاهی وضعیتی تاکتیکی در نیروهای مسلح کشورها وجود داشته است که می‌توانند دید جامع و به‌روز از میدان نبرد را در اختیار نیروها قرار دهند. این سامانه‌ها معمولا داده‌ها را از منابع مختلف، از جمله حسگرها، گزارش‌های اطلاعاتی و مشاهدات انسانی دریافت و یکپارچه می‌کنند. سپس از الگوریتم‌های پیشرفته برای پردازش و تجزیه و تحلیل این داده‌ها استفاده می‌کنند تا آن‌ها را به گونه‌ای به نیروها ارائه کنند که درک و استفاده از آن آسان باشد. از جمله این سامانه‌ها می‌توان سامانه‌ی FBCB2 ساخت ارتش آمریکا را نام برد که با استفاده از شبکه‌ی رادیویی EPLRS و شبکه‌ی ماهواره‌ای BFT اطلاعات مکانی مربوط به نیروهای این کشور را مخابره کرده و در قالب نقشه اختیار فرماندهان قرار می‌دهد.

سامانه‌های آگاهی وضعیتی تاکتیکی این پتانسیل را دارند که شیوه اجرای عملیات‌های نظامی را متحول کنند. با ارائه درک بهتر به نیروهای مسلح از میدان نبرد، این سامانه‌ها می توانند آنها را قادر به تصمیم گیری سریعتر و آگاهانه تر و در نهایت موفقیت بیشتر در نبرد کنند.

به طور کلی قابلیت‌های چنین سامانه‌هایی به سه بخش کلی تقسیم می‌شود:

1.        دریافت 	و 	یکپارچه‌سازی 	داده‌ها: 	این 	سامانه‌ها 	باید 	بتوانند 	داده‌ها 	را 	از 	منابع 	مختلف 	از 	جمله 	حسگرها، 	گزارش‌های 	اطلاعاتی 	و 	مشاهدات 	انسانی 	استخراج 	و 	جمع‌آوری 	کنند. 	پیاده‌سازی 	چنین 	قابلیتی 	با 	چالش‌های 	زیادی 	همراه 	است، 	زیرا 	این 	داده 	ها 	ممکن 	است 	در 	قالب‌های 	مختلفی 	بوده 	و 	از 	نظر 	فرم 	و 	محتوا 	با 	یکدیگر 	سازگار 	نباشند.

2.        پردازش 	داده 	ها: 	این 	سامانه‌ها 	باید 	بتوانند 	حجم 	زیادی 	از 	داده 	ها 	را 	به 	صورت 	بلادرنگ 	پردازش 	و 	تجزیه 	و 	تحلیل 	کنند. 	بنابرین 	نیاز 	به 	توان 	محاسباتی 	بالا 	و 	اطمینان 	از 	اینکه 	داده 	ها 	به 	طور 	دقیق 	و 	کارآمد 	پردازش 	می 	شوند، 	در 	چنین 	سامانه‌هایی 	وجود 	دارد.

3.        ارائه 	داده 	ها: 	این 	سامانه‌ها 	باید 	داده 	ها 	را 	به 	صورتی 	به 	نیروها 	ارائه 	دهند 	که 	درک 	و 	استفاده 	از 	آن 	آسان 	باشد. 	با 	توجه 	به 	احتمال 	پیچیدگی 	داده‌ها 	و 	ازدیاد 	اطلاعات 	در 	صحنه‌ی 	نبرد، 	مهم 	است 	که 	نحوه‌ی 	ارائه 	داده‌ها 	با 	توجه 	به 	نیاز 	هر 	کاربر 	سامانه، 	به 	ساده‌ترین 	شکل 	و 	با 	اولویت 	داده‌های 	مورد 	نیاز 	وی 	انجام 	پذیرد.

### **3\) بيان مسأله و هدف از انجام طرح:**

#### **۳.۱) شرح کلی طرح**

سامانه‌ی پیشنهادی در این طرح، سامانه‌ای خواهد بود که در آن کاربران در سطوح مختلف، بتوانند آگاهی وضعیتی مورد نیاز برای انجام ماموریتشان را کسب کنند. هر یک از کاربران این سامانه، توسط یک دستگاه الکترونیکی (مانند رایانه، گوشی همراه، تبلت و ...) به سامانه متصل شده و سامانه پیشنهادی با استفاده از ظرفیت‌های خاص محیطی (مثلا ساختار شبکه‌ی در نظر گرفته شده)، اطلاعات محیطی مورد نیاز را در سطوح مختلف دریافت نموده، روی آن‌ها فرآیندهای لازم برای پردازش آن‌ها را انجام داده و به کاربران متصل به سامانه (با توجه به سطوح دسترسی و میزان نیاز به این اطلاعات) ارسال خواهد کرد تا کاربران به صورت بلادرنگ آگاهی وضعیتی مناسبی را نسبت به محیط خود کسب کنند.

نیازمندی‌های در نظر گرفته شده برای این طرح، به شرح زیر است:

1.        قابلیت 	نشان دادن محل قرارگیری نیروهای خودی بر 	روی نقشه

2.        قابلیت 	نشانه‌گذاری 	روی 	نقشه، 	برای 	مشخص 	کردن 	نیروی‌های 	دشمن، 	نقاط‌های 	مهم 	و 	...

3.        قابلیت 	ارسال و دریافت پیام‌های متنی (چت)

4.        قابلیت 	انتقال اطلاعات بر روی ساختار شبکه‌ی 	غیرمتمرکز 	از 	طریق 	ارتباطات 	رادیویی

#### **۳.۲) کاربران و ساختار شبکه‌ی ارتباطی سامانه**

برای توصیف دقیق طرح، ابتدا لازم است انواع کاربران این سامانه و ساختار ارتباط آنان با یکدیگر از طریق سامانه‌ی آگاهی وضعیتی شرح داده شود. با توجه به نیازمندی‌ها و ملاحظات خاص ارتباطی در صحنه‌های نظامی، در ساختار شبکه‌‌ی این سامانه، ارتباطات به صورت غیرمتمرکز و از طریق ارتباطات رادیویی در نظر گرفته شده است. بر این اساس، گروه‌های مختلف کاربران، در چند زیرشبکه قرار می‌گیرند که هر کدام این زیرشبکه‌ها از طریق یکی از گره‌های متصل (که آن‌ها را سرگروه می‌نامیم)، می‌توانند با سطح بالاتر خود که خارج از آن زیرشبکه قرار دارد به طرق دیگر ارتباط برقرار کنند.

شکل 1\- ساختار شبکه‌ی سامانه آگاهی وضعیتی

انواع مختلف کاربرانی که از این سامانه استفاده می‌کنند به شرح زیر است:

1.        سرباز: 	اولین 	نوع کاربر سامانه، سربازانی هستند که در 	صحنه‌ی عملیاتی با دستگاه خود به یک 	زیرشبکه از سامانه متصل شده‌اند. 	کاربرد 	سامانه برای این افراد، متصل بودن به 	فرمانده‌ی خود و دیگر سربازان زیرشبکه‌ی 	خود است تا اولا اطلاعات مربوط به محل 	حضور آن‌ها جمع‌آوری شده و به باقی 	کاربران ارسال شود، دوما در صورت نیاز 	از طریق سامانه بتوانند محل فرمانده و 	دیگر سربازان زیرشبکه را مشاهده کرده و 	با آن‌ها از طریق چت ارتباط برقرار کنند. 	برای 	اتصال به سامانه، این افراد نیاز به یک 	دستگاه الکترونیکی (مثلا 	تلفن همراه یا تبلت) 	برای 	مشاهده نقشه‌ی محیط، محل حضور خود و دیگر 	سربازان، نقاط دیگری مانند محل حضور 	نیروهای دشمن و سایر اطلاعات دارند. 	این 	دستگاه از طریق رادیوی همراه آنان، با 	سایر افراد زیرشبکه ارتباط برقرار خواهد 	کرد.

2.       سرگروه: 	در 	هر زیرشبکه، یک کاربر سرگروه قرار دارد 	که وظیفه‌ی فرماندهی و هماهنگی بین 	سربازان گروه خود را برعهده دارد. 	این 	کاربر علاوه بر اتصال به سربازان زیرشبکه‌ی 	خود، از طرق دیگر نیز به زیرشبکه‌های 	دیگر و شبکه‌ی فرماندهی متصل است. 	با 	توجه به شرایط، این ارتباط می‌تواند از 	طریق رادیوهایی با برد بیشتر یا ارتباطات 	ماهواره‌ای باشد. 	نقش 	سرگروه‌ها در سامانه، این است که بین 	زیرشبکه‌ها و با مرکز فرماندهی ارتباط 	برقرار کنند، تا بتوانند اطلاعات زیرشبکه‌ی 	خود را در اختیار کاربران خارج زیرشبکه 	قرار داده و هم‌چنین اطلاعات را از 	کاربران خارج زیرشبکه، دریافت کرده و در 	صورت لزوم به سربازان متصل به زیرشبکه 	بفرستند.

    با توجه به نقش سرگروه، این کاربر نیاز است که علاوه بر دستگاهی برای مشاهده‌ی نقشه و اطلاعات روی آن، به سخت‌افزارهای دیگری برای ایجاد ارتباط با دیگر زیرشبکه‌ها و مرکز فرماندهی نیز دسترسی داشته باشد. هم‌چنین نرم‌افزار نصب شده برای این کاربر، علاوه بر جمع‌آوری اطلاعات و ارسال آن‌ها در زیرشبکه، باید امکان مسیریابی پیام‌های اطلاعاتی بر روی بیش از یک شبکه ارتباطی را نیز فراهم کند.

3.       مرکز 	فرماندهی: 	خارج 	از ساختار زیرشبکه‌ها، یک کاربر مرکز 	فرماندهی در نظر گرفته شده‌است که بر کل 	شبکه نظارت دارد. 	این 	کاربر اطلاعات را از تمامی زیرشبکه‌ها 	(از 	طریق سرگروه‌ها) 	دریافت 	کرده و امکان مانیتورینگ کامل و ارسال 	پیام‌های اطلاعاتی (چت 	و گزارش‌های مکانی) 	به 	هر یک از کاربران سامانه را داراست. 	نرم‌افزار 	نصب شده برای این کاربر، علاوه بر امکانات 	نرم‌افزار سرگروه، امکان آرشیو کردن 	اطلاعات به صورت بلندمدت را نیز فراهم 	می‌کند.

در ساختار شرح داده شده، کاربران متصل به یک زیرشبکه، می‌توانند به صورت مستقیم با یک دیگر ارتباط داشته باشند. ولی ارتباط بین زیرشبکه‌ها باید لزوما از طریق از سرگروه‌ها در ساختار شبکه مسیریابی شده و از این مسیر انتقال داده اتفاق بیفتد. این مسئله، چالش‌های بیشتری برای انتقال داده‌های وضعیتی مورد نیاز برای بهبود آگاهی وضعیتی ایجاد خواهد کرد که در طراحی این سامانه در نظر گرفته شده‌اند.

در راستای ایجاد آگاهی **وضعیتی** مناسب، کاربران نیاز به کسب اطلاعات بلادرنگ از محیط خود دارند. به عنوان مثال، یکی از اطلاعات بسیار مهم برای تصمیم‌گیری افراد در موقعیت‌های نظامی، محل قرارگیری نیروهای خودی در صحنه‌ی درگیری‌ است.

اولین گام برای رفع این نیازمندی، دریافت و استخراج این اطلاعات از محیط است. در مورد موقعیت نیروهای خودی، برنامه‌ی نصب‌شده بر دستگاه هر کاربر، از طریق حسگرهای موقعیت‌یاب (مثلا GPS) این اطلاعات را در بازه‌های زمانی مشخص (مثلا هر یک دقیقه) استخراج می‌کنند.

در گام دوم، لازم است اطلاعات محیطی استخراج شده، از طریق شبکه به سامانه آگاهی وضعیتی ارسال شود. با توجه به ساختار غیرمتمرکز شبکه، این اطلاعات در کل زیرشبکه منتشر می‌شود، تا تمامی کاربران در زیرشبکه به آن دسترسی پیدا کنند.

در گام آخر کاربران دیگر سامانه، این اطلاعات را دریافت خواهند کرد. در صورت نیاز بخشی یا تمام این اطلاعات توسط سرگروه به لایه‌های بالاتر شبکه ارسال خواهد شد تا عملیات آرشیو شدن و توزیع به سایر زیرشبکه‌ها اتفاق بیفتد.

#### **۳.۳) ساختار پیام‌های اطلاعاتی**

برای ارسال اطلاعات در بین کاربران مختلف سامانه، نرم‌افزار سامانه این اطلاعات را در قالب پیام‌های اطلاعاتی درآورده و ارسال و دریافت می‌کند. استاندارد پیشنهادی در این طرح برای این پیام‌ها، پروتکل Cursor on Target است که برای مصارف نظامی به خصوص سامانه‌های آگاهی وضعیتی طراحی شده است. این پروتکل در شرکت MITRE و به سفارش نیروی هوایی ارتش آمریکا طراحی شد تا بتواند به عنوان زبانی مشترک برای اتصال انواع سیستم‌های نظامی به هم، به کار گرفته شود. این پروتکل بر پایه‌ی XML ساخته شده است، ولی برای کم کردن اندازه‌ی هر پیام، می‌توان آن را به صورت protobuf نیز ارسال و دریافت کرد.

به طور کلی، هر پیام CoT شامل چند داده‌ی کلی است:

1.        شناسه‌ی 	اتفاق 	مورد 	توصیف 	(فیلد 	uid)

2.        نوع 	اتفاق 	(فیلد 	type)

3.        اطلاعات 	زمانی 	مربوط 	به 	اتفاق 	(فیلدهای 	time، 	start 	و 	stale)

4.        مکان 	(تگ 	point)

5.        اطلاعات 	بیشتر 	(تگ 	detail)

یک نمونه‌ی ابتدایی از یک پیام CoT در شکل زیر آورده شده است. برای درک این پیام، لازم است هر یک از بخش‌های مختلف فیلد type آن را که با خط فاصله مشخص شده است، معنی کنیم.

بخش اول آن (a)، نشان‌دهنده‌ی این است که این پیام مربوط به یک موجودیت واقعی است. مثال‌های دیگری مقادیر دیگر بخش اول، b برای ارسال داده (مثلا برای ارسال چت) و ‌t برای ارسال یک دستور یا درخواست است.

بخش دوم فیلد type در مثال زیر (h)، به معنی این است که شی مورد توصیف، دشمن (hostile) است.

بخش‌های بعدی این فیلد نیز، نشانگر نوع دقیق این نیرو، بر اساس استاندارد MIL-STD-2525 می‌باشد. بنابراین مثال زیر (AMFUM) در مورد یک هواپیمای ثابت‌بال نظامی چندمنظوره‌ی متوسط (Medium Utility Fixed-wing Aircraft) است.

ج

    شکل 	2 \- 	مثالی 	از یک پیام CoT

دا از داده‌های ابتدایی‌ای که در پیام‌های CoT ارسال می‌شود، تگ detail این امکان را به ما می‌دهد تا هر نوع داده‌ی دیگری که مورد نیاز است را داخل پیام خود جا داده و ارسال کنیم.

استفاده از پروتکل CoT به سامانه این قابلیت را می‌دهد که بتواند به راحتی با تمامی سیستم‌های دیگر نظامی و غیرنظامی که از این پروتکل استفاده می‌کنند ارتباط برقرار کند و بتواند اطلاعات دیگر سیستم‌ها را در اختیار کاربران سامانه قرار بدهد. به عنوان مثال، با استفاده از نرم‌افزار تبدیل پیام‌های سامانه‌ی کنترل ترافیک هوایی ADS-B به CoT، می‌توان اطلاعات پروازها را به سامانه‌ی آگاهی وضعیتی فرستاد و در اختیار کاربران قرار داد.

#### **۳.۴) نقشه**

قابلیت مهم دیگر پیشنهادی سامانه مورد نظر، قابلیت نمایش اطلاعات در قالب نقشه جغرافیایی در سطوح مختلف کاربران موجود در شبکه است. برای این منظور کاربران لازم است که بتوانند از طریق دستگاه‌های خود به نقشه‌ی محیط خودشان دسترسی داشته تا بتوانند محل حضور دیگر کاربران را روی نقشه مشاهده کنند. همچنین افراد خواهند توانست که اطلاعات دیگر، از جمله محل قرارگیری نقاط مهم را روی نقشه مشخص کرده و برای افراد دیگر به طور خودکار ارسال کنند. این قابلیت‌ها به کاربران امکان این را خواهد داد که بتوانند اطلاعات وضعیتی مهم، به طور خاص اطلاعات جفرافیای محیط عملیاتی خود را با یک‌دیگر به اشتراک بگذارند.

**۳.۴) کیت حمله تاکتیکی (TAK)**:

کیت حمله تاکتیکی یک سامانه آگاهی وضعیتی تاکتیکی ساده‌تر و منبع باز است که توسط انواع سازمان های نظامی و مجری قانون استفاده می شود.

برخی از ویژگی های کلیدی TAK عبارتند از:

1.
2.  ت
3.       	شکل 		6 \- 		نمای 		کاربری ATAK، 		رابط کاربری اندرویدی سامانه‌ی TAK

    صویر عملیاتی مشترک: TAK تصویر عملیاتی مشترک از میدان نبرد را در اختیار کاربران قرار می دهد. این تصویر شامل اطلاعاتی از موقعیت و فعالیت نیروهای دوست و دشمن و همچنین زمین و شرایط آب و هوایی است.

4.       به 	روز 	رسانی 	داده 	ها: 	 	TAK 	داده 	های 	به 	روزرسانی‌شده 	از 	منابع 	مختلف 	دریافت 	می 	کند. 	سپس 	این 	داده 	ها 	پردازش 	شده 	و 	به 	گونه 	ای 	به 	کاربران 	ارائه 	می 	شود 	که 	درک 	و 	استفاده 	از 	آن 	آسان 	باشد.

5.       ابزارهای 	همکاری: 	TAK شامل 	انواع 	ابزارهای 	همکاری 	است 	که 	به 	کاربران 	اجازه 	می 	دهد 	اطلاعات 	را 	به 	اشتراک 	بگذارند 	و 	فعالیت 	های 	خود 	را 	هماهنگ 	کنند. 	این 	ابزارها 	شامل 	چت، 	صوتی 	و 	ویدئو 	کنفرانس 	است.

از آن‌جایی که TAK دارای پروتکلی بر پایه‌ی CoT است و قابلیت‌های CoT را ارتقا می‌دهد. معماری TAK بر پایه‌ی کلاینت/سرور طراحی شده است، با این وجود در آن امکان ایجاد ارتباط بین کلاینت‌ها در یک زیرشبکه، بدون دخالت سرور نیز وجود دارد. با توجه به متن باز بودن پروژه‌های کلاینت و سرور TAK، و پوشش دادن بخش خوبی از نیازمندی‌های آگاهی وضعیتی، این سیستم کاندیدای خوبی برای تغییر و پیاده‌سازی نیازمندی‌های سامانه‌ی آگاهی وضعیتی ماست.

#### **۳.۵) بخش‌های مختلف نرم‌افزار**

بخش‌های مختلف نرم‌افزار تولیدی برای هر یک از کاربران سامانه، به شرح زیر خواهد بود:

1.

2.       	شکل 		3\- 		نمای 		رابط کاربری

    **رابط کاربری:** برای نمایش اطلاعات آگاهی وضعیتی، به طور خاص مکان کاربران دیگر سامانه، بخش رابط کاربری بر پایه‌ی نقشه توسعه داده خواهد شد. موقعیت نقاط مهم، نیروهای خودی و دشمن به صورت سمبول‌های استاندارد MIL-STD-2525 روی نقشه نشان داده می‌شوند. این رابط علاوه بر این قابلیت اضافه کردن نقاط بر روی نقشه به منظور به اشتراک‌گذاری مشاهدات کاربران از عوامل محیطی و نیروهای شناسایی شده‌ی دشمن را نیز خواهد داشت. بخش دیگر این رابط مربوط به قابلیت چت، برای ارسال پیام‌های متنی به دیگر کاربران خواهد بود. برای این‌که رابط کاربری مورد نظر قابل استفاده در محیط‌های مختلف باشد، این رابط به صورت یک web app توسعه داده می‌شود.

3.        **استخراج 	داده‌های محیطی:** 	بسته 	به نوع حسگرهایی که کاربران سامانه به 	آن دسترسی دارند، نیاز است که نرم‌افزار 	پیاده‌سازی شده بتواند داده‌هایی را 	از حسگرها استخراج کند. 	داده‌ی 	مهمی که در حال حاضر برای کاربران عملیاتی 	سامانه در نظر گرفته شده‌است، داده‌ی 	مربوط به مکان کاربران است. 	این 	داده توسط حسگرهای موجود از جمله GPS 	در 	بازه‌های 	معین 	استخراج 	می‌شود 	تا 	برای 	دیگر 	کاربران 	از 	جمله 	سرگروه 	ارسال 	شود.

4.        **انتشار 	پیام:** 	داده‌های 	محیطی استخراج شده از حسگرها، نقاط مشخص 	شده توسط کاربر روی نقشه و پیام‌های چت، 	در داخل نرم‌افزار سامانه، به پیام‌هایی 	با استاندارد CoT 	تبدیل 	می‌شوند 	که توسط این بخش نرم‌افزار به کاربران 	دیگر انتشار می‌یابند. 	دو 	وظیفه‌ی اصلی این بخش، یکی مشخص کردن 	گیرندگان هر پیام، بر اساس نوع پیام و 	دیگری ارسال پیام از طریق زیرساخت‌های 	ارتباطی در اختیار سامانه (مثلا 	رادیو) 	است.

5.       **مدیریت 	داده‌ها:** 	داده‌های 	سامانه، از جمله پیام‌های ارسالی کاربران 	لازم است که در پایگاه داده‌ی نرم‌افزار 	سامانه آرشیو و مدیریت شوند. 	همچنین 	در هنگام نیاز به بازنگری این پیام‌ها، 	لازم است که چنین داده‌هایی در پایگاه 	داده جستجو شده و داده‌های مرتبط با آن 	پرس‌وجو بر اساس سطح دسترسی کاربر 	درخواست‌دهنده انتخاب و برای او ارسال 	شود.

6.        **درگاه 	سرویس‌های شبکه:** 	با 	توجه به نیاز سرگروه‌ها به پهنای باند 	بیشتر برای ارسال اطلاعات به رده‌های 	بالاتر، ممکن است آن‌ها نیاز به بیش از 	یک روش برای ارسال اطلاعات داشته باشند. 	از 	طرف دیگر، با توجه به نقش خاص آن‌ها و 	احتمالا حضور آن‌ها در تجهیزاتی مانند 	نفربرها، امکان استفاده از تجهیزات 	ارتباطی و مخابراتی بیشتری برای آنان 	وجود دارد. 	بنابراین 	آن‌ها می‌توانند علاوه بر تجهیزات 	رادیویی در دسترس کاربران، بر اساس 	روش‌های دیگری (مانند 	ارتباط ماهواره‌ای یا بی‌سیم‌هایی با 	برد بیشتر) 	با 	کاربران هم‌رده یا بالاتر از خود ارتباط 	برقرار کنند. 	بر 	همین اساس، با توجه به حضور آنان در دو 	شبکه‌ی مختلف (یکی 	در سطح زیرشبکه و دیگری شبکه‌ی بالاتر) 	لازم 	است که بتوانند این دو شبکه را با یک‌دیگر 	تلفیق کنند. 	این 	اتفاق از طریق درگاه سرویس‌های شبکه 	اتفاق خواهد افتاد. 	این 	درگاه اطلاعات دریافت‌شده از طریق 	ماهواره یا بی‌سیم‌های دوربرد را با 	شبکه‌ی رادیویی سطح زیرشبکه به کاربران 	ارسال خواهد کرد.

شکل 4\- نحوه‌ی ارسال و انتشار پیام در سامانه

لازم به ذکر است که تمامی این بخش‌ها، لازم نیست در اختیار تمامی کاربران قرار گیرد. به طور خاص، موارد مربوط به درگاه سرویس شبکه و مدیریت داده‌ها به طور خاص مربوط به سطوح سرگروه و بالاتر هستند، زیرا صرفا در این سطوح لازم است که ذخیره‌سازی و مسیریابی اتفاق بیفتد. برای بقیه‌ی کاربران، صرفا داشتن اطلاعات شخصی و پیام‌های دریافتی برای نمایش در رابط کاربری آنان کفایت خواهد کرد.

#### **۳.۶) حدود طرح:**

بر اساس شرح داده شده در این طرح، سرویس‌های نرم‌افزاری لازم برای پیاده‌سازی این سامانه طراحی و پیاده‌سازی خواهند شد. پیش‌نیاز پیاده‌سازی برخی از این سرویس‌ها، امکان ایجاد برقراری ارتباطات رادیویی یا ماهواره‌ای از طریق تجهیزات سخت‌افزاری خاصی است که تهیه، تولید، راه‌اندازی و نگه‌داری آن‌ها خارج از حیطه‌ی این طرح است. در تهیه‌ی این طرح، ویژگی‌های خاص ارتباطات رادیویی (از جمله پهنای باند پایین و احتمال خطای بالا)، در نظر گرفته‌شده‌است و فرض بر این خواهد بود که سرویس‌های نرم‌افزاری سامانه در لایه‌ی Application مدل OSI قرار دارند و می‌توانند روی شبکه‌های رادیویی (و/یا ماهواره‌ای) پکت‌های TCP و UDP به یک‌دیگر ارسال کنند.

5\) خلاصه نتایج کسب شده در فاز جاری  
۱. بررسی، اجرا و مقایسه‌های پیاده‌سازی‌های مختلف TAK  
۲. اجرا کردن پروژه از طریق Docker  
۳. پیاده‌سازی ارسال پیام به صورت Multicast  
۴. پیاده‌سازی ارسال پیام به صورت Broadcast  
۵. فارسی‌سازی پروژه  
۶. پیاده‌سازی سرور نقشه محلی  
۷. تنظیم و اجرا کردن gpsd از طریق Docker

همان‌طور که پیش از این گفته شد، سیستم TAK برای پیاده‌سازی نیازمندی‌های آگاهی وضعیتی سامانه‌ی ما بسیار مناسب است. با توجه به در دسترس بودن پروتکل‌های ارتباطی سیستم TAK (شامل CoT و استانداردهای ارتباطی کلاینت با سرور و کلاینت‌های دیگر)، پیاده‌سازی‌های متعدد رسمی و غیررسمی به صورت متن‌باز برای سیستم TAK انجام شده است.  
برای بررسی انواع مختلف پیاده‌سازی‌ها، بررسی نقاط قوت و ضعف، و امکان توسعه‌ی سامانه‌ی ما بر پایه‌ی پیاده‌سازی‌های متن‌باز انجام شده، چندین پروژه‌ی در دسترس بررسی شدند:  
۱. TAKServer: این پروژه، نسخه‌ی رسمی پیاده‌سازی سرور سیستم TAK است که با حذف برخی از قابلیت‌های نظامی آن، به صورت متن‌باز در اختیار همگان قرار داده شده است.  
پیاده‌سازی این پروژه با استفاده از زبان جاوا انجام شده است. از لحاظ امکانات و قابلیت‌ها، این پروژه کامل‌ترین پیاده‌سازی را دارد. از طرف دیگر، همین مسئله، باعث پیچیدگی بسیار بالای این پروژه شده است، به طوری که صرفا اجرای این پروژه، نیاز به چندین ساعت ویرایش تنظیمات مختلف دارد.  
۲. FreeTAKServer: این پروژه، با استفاده از زبان پایتون نوشته شده است و هدف آن این است که تا جای ممکن قابلیت‌های نسخه‌ی رسمی را پیاده کند. این پروژه مستندات مناسبی برای پروتکل و استاندارد‌های TAK فراهم کرده است که به ما برای پیاده‌سازی سامانه‌ی خود کمک زیادی می‌تواند بکند.  
با این وجود، مثل TAKServer انی پروژه صرفا شامل پیاده‌سازی بخش سرور TAK است و نمی‌توان برای پیاده‌سازی کلاینت از آن کمک گرفت.  
۳. GoATAK: این پروژه با زبان go نوشته شده است و شامل هر دو بخش سرور و کلاینت است. بخش رابط کاربری کلاینت این پروژه با استفاده از فریمورک Vue انجام شده است.  
از لحاظ پیاده‌سازی قابلیت‌ها و استاندارد‌های TAK، این پروژه قابل مقایسه با پروژه‌های قبلی نیست و امکانات پیاده‌سازی شده در آن، به صورت حداقلی انجام شده است. این مسئله، امکان استفاده از این پروژه، برای ارتقای آن و پیاده‌سازی نیازمندی‌های سامانه‌ی خود ما را فراهم می‌کند، زیرا پیچیدگی‌های غیرلازم و قابلیت‌هایی که در سامانه‌ی ما نیازی به آن‌ها وجود ندارد، در آن نیست.

بخش‌های مختلف کلاینت:  
![][image1]

در گام نخست برای پیاده‌سازی بخش رابط کاربری و عملکرد‌های اصلی سامانه، معماری نسخه‌ی مربوط به کاربر طراحی شد که شامل بخش‌های زیر است:  
۱. رابط کاربری، شامل یک اپلیکیشن وب، به شکل زیر است که به کاربر این امکان را می‌دهد که با سامانه تعامل کند.  
۲. پردازشگر کلاینت: این بخش، برنامه‌ای است که از یک سو وظیفه‌ی برقراری ارتباط با کاربران دیگر از طریق شبکه را داشته و از طرف دیگر با اتصال به رابط کاربری، ارتباط دو طرفه‌ی لازم برای دریافت فرمان‌های کاربر و هم‌چنین ارائه‌ی اطلاعات دریافت‌شده از کاربران دیگر به رابط کاربری برای نمایش را فراهم می‌کند.  
۳. سرور موقعیت: این سرویس با دریافت موقعیت از دستگاه GPS و ارسال مداوم موقعیت کاربر به پردازشگر کلاینت نیازمندی ما برای پیدا کردن موقعیت کاربر را رفع می‌کند.  
۴. سرور نقشه: این نقشه، وظیفه‌ی نگه‌داری و ارائه‌ی نقشه برای نمایش در رابط کاربری را دارد.

برای پیاده‌سازی نسخه‌ی کاربر، بر پایه‌ی پروژه‌ی GoATAK جلو رفتیم. پس از تنظیم و اجرای موفق این پروژه به صورت تستی، تصمیم بر این شد که برای ایجاد قابلیت اجرا در محیط‌های مختلف، این پروژه با استفاده از Docker اجرا شود. به این دلیل برای برنامه‌ی کلاینت در پروژه‌ی GoATAK یک Dockerfile مناسب نوشته شد که شامل ۲ بخش build و execution است. در بخش build، کتابخانه‌هایی که پروژه به آن‌ها وابسته است، دانلود شده و فایل‌های پروژه کامپایل می‌شوند. در بخش execution فایل‌های کامپایل شده در docker image قرار می‌گیرند، تا سایز نهایی آن کاهش پیدا کند.  
با توجه به اجزای متعددی که نیاز است به همراه GoATAK اجرا شوند تا نیازمندی‌های پروژه پوشش داده شود، از docker compose استفاده کردیم تا بتوان تمامی این بخش‌ها را به همراه هم، روی انواع محیط‌ها بدون مسئله اجرا کنیم.

یکی از نیازمندی‌های سامانه‌ی ما این است که بر اساس طراحی انجام شده و ارائه شده در طرح پروژه، کاربران یک زیرشبکه، بتوانند بدون وابستگی به یک سرور، با یک‌دیگر ارتباط برقرار کنند. از آن‌جایی که در GoATAK پیاده‌سازی بر اساس کلاینت/سرور انجام شده است، این امکان وجود نداشت.

در پروتکل TAK برای این امکان، در نظر گرفته شده است که کلاینت‌ها علاوه بر ارسال اطلاعات به سرور، در شبکه‌ی محلی خود نیز به صورت Multicast با یک‌دیگر ارتباط برقرار کنند.

روش Multicast روشی برای ارسال اطلاعات به گروه خاصی از گیرندگان است، برخلاف روش Unicast که اطلاعات را فقط به یک گیرنده خاص ارسال می‌کند و روش Broadcast که اطلاعات را به همه گیرندگان موجود در شبکه ارسال می‌کند.

Multicast در پروتکل IP نسخه ۴ با استفاده از آدرس‌های IP خاص به نام آدرس‌های Multicast انجام می‌شود. این آدرس‌ها با یک رنج مشخص از آدرس‌های کلاس D (بین ۲۲۴.۰.۰.۰ تا ۲۳۹.۲۵۵.۲۵۵.۲۵۵) تعریف شده‌اند.

هنگامی که یک فرستنده قصد ارسال اطلاعات به گروهی از گیرندگان را دارد، به جای آدرس IP تک‌دستگاهی، آدرس IP Multicast گروه را در پکت‌ها قرار می‌دهد. روترهای شبکه این آدرس خاص را تشخیص داده و بسته را به تمام رابط‌های خود که عضو گروه Multicast هستند، تکرار می‌کنند.

دستگاه‌های گیرنده نیز از پروتکلی مانند IGMP برای عضویت در گروه‌های Multicast استفاده می‌کنند. با دریافت بسته‌هایی که آدرس Multicast گروه مدنظر را دارند، دستگاه متوجه می‌شود که عضو آن گروه است و در غیر این صورت، بسته‌ها را نادیده می‌گیرد.

این روش باعث می‌شود که بسته‌های اطلاعاتی تنها به دستگاه‌های عضو گروه ارسال شوند و از اتلاف پهنای باند و ترافیک اضافی روی کل شبکه جلوگیری به عمل آید.

بر همین اساس، پیاده‌سازی روش ارسال Multicast در GoATAK به زبان Go انجام شد. در این پیاده‌سازی، مستقل از ارتباط کلاینت با سرور، هر کلاینت، در فواصل زمانی مشخص، موقعیت خود، نقاط مهم و انواع پیام‌های CoT دیگر را به آدرس Multicast به آی‌پی ۲۳۹.۲.۳.۱ و پورت ۶۹۶۹ ارسال می‌شود که بر اساس استاندارد TAK انتخاب شده‌اند تا کلاینت‌های ما قابلیت کار کردن با کلاینت‌های رسمی را نیز داشته باشند. هم‌چنین کلاینت‌ها در همین گروه نیز عضو می‌شوند تا بتوانند پیام‌های ارسالی از دیگر کلاینت‌ها را دریافت کنند.

پس از پیاده‌سازی و تست موفق این قابلیت در سیستم‌عامل لینوکس، با این مسئله مواجه شدیم که در سیستم‌عامل ویندوز، با توجه به برخی از محدودیت‌های Docker، پیام‌های Multicast به درستی ارسال نمی‌شوند. پس از تلاش‌های ناموفق برای رفع این مسئله، تصمیم گرفتیم تا علاوه بر Multicast به روش Broadcast نیز اطلاعات را ارسال کنیم.

پیاده‌سازی قابلیت ارسال به صورت Broadcast نیز در کد انجام شد تا کلاینت علاوه بر ارسال پیام به صورت Multicast در شبکه‌ی محلی خود، اطلاعات را به صورت Broadcast نیز ارسال کنند.

سرویس جی‌پی‌اس: دز این سرویس، یک نسخه از نرم‌افزار gpsd تنظیم و مستقر شده است.  
gpsd یک نرم‌افزار متن‌باز و رایگان است که روی سیستم‌عامل‌های مختلف اجرا می‌شود و به عنوان یک پل بین گیرنده‌های GPS و برنامه‌های کاربردی عمل می‌کند.

gpsd به طور مداوم با گیرنده GPS ارتباط برقرار کرده و داده‌های خام موقعیت‌یابی، از جمله طول و عرض جغرافیایی، زمان، و اطلاعات ماهواره را دریافت می‌کند. سپس داده‌های خام را پردازش و به فرمت‌های قابل استفاده برای برنامه‌های مختلف تبدیل می‌کند. برنامه‌های دیگر می‌توانند با gpsd ارتباط برقرار کرده و به داده‌های موقعیت‌یابی دسترسی پیدا کنند. این امر باعث می‌شود برنامه‌ها بدون نیاز به برقراری ارتباط مستقیم با گیرنده GPS، از موقعیت کاربر یا دستگاه مطلع شوند.

از آنجا که gpsd مسئولیت برقراری ارتباط و مدیریت داده‌های GPS را برعهده دارد، برنامه‌های دیگر نیازی به انجام این کار ندارند که منجر به صرفه‌جویی در منابع سیستم می‌شود. gpsd از گیرنده‌های GPS مختلف پشتیبانی می‌کند و با سیستم‌عامل‌های گوناگون سازگار است.

گیرنده GPS مورد نظر، معمولا سخت‌افزاری است که قابلیت مکان‌یابی را فراهم می‌کند. برای مثال در گوشی‌های هوشمند، چنین سخت‌افزاری وجود دارد و سیستم‌عامل اندروید، با استفاده از نرم‌افزار gpsd با آن ارتباط برقرار می‌کند. از طرف دیگر می‌توان برای سناریوهای تست یا در مواقعی که دسترسی به گیرنده‌ GPS سخت‌افزاری وجود ندارد و موقعیت بر اساس روش‌های دیگری محاسبه می‌شود (مثلا سامانه‌ی AIS در کشتیرانی) می‌توان نوعی گیرنده‌ی خاص برای gpsd تعریف کرد که این امکان را به ما می‌دهد که با ارسال موقعیت روی یک پورت شبکه به gpsd، اطلاعات موقعیتی را به برنامه‌های کاربردی بفرستیم.

در فاز یک پروژه، سرویس gpsd با این گیرنده شبکه تنظیم شده است که به ما امکان تست اتصال سامانه به GPS را می‌دهد. پردازشگر کلاینت، با اتصال به سرویس gpsd، از آن موقعیت فرضی کاربر را دریافت می‌کند. موقعیت دریافت شده، بر روی رابط کاربری نمایش داده شده و در فواصل زمانی معین به دیگر کاربران سامانه ارسال خواهد شد.

سرویس نقشه

همان‌طور که در پروپوزال این پروژه گفته شد، لازم است رابط کاربری این سامانه نقاط مهم (از جمله محل حضور نیروها) را بر روی بستر نقشه نمایش دهد. برای پیاده‌سازی این قابلیت، در رابط کاربری نیاز به استفاده از یک کتابخانه‌ی نقشه است که با استفاده از آن بتوان نقشه را نمایش داده و نقاط مختلف را با استفاده از SDK آن، به نقشه اضافه کرد.  
پیاده‌سازی نقشه در سامانه با استفاده از کتابخانه‌ی Leaflet انجام شده است. Leaflet یک کتابخانه جاوااسکریپت متن باز و رایگان است که برای ساختن نقشه‌های تعاملی وب به کار می‌رود. این کتابخانه به دلیل سادگی در استفاده، وزن کم و انعطاف‌پذیری بالا، محبوبیت زیادی در بین توسعه‌دهندگان وب پیدا کرده است.

با استفاده از Leaflet می‌توان نقشه‌های پایه‌ای را از سرویس‌های مختلف (مثلا OpenStreetMap) فراخوانی کرد و سپس لایه‌های اطلاعاتی مورد نظر را بر روی آن قرار داد. این کتابخانه از انواع کنترل‌کننده‌ها مانند زوم، پیمایش، مکان‌یابی و ... پشتیبانی می‌کند که به کاربر امکان برقراری تعامل با نقشه را می‌دهد.

در سرویس‌های ارائه‌ی نقشه، یک نقشه به بخش‌های کوچک‌تر و مدیریت‌‌پذیرتری به نام کاشی (Tile) تقسیم می‌شود. این کاشی‌ها می‌توانند مربع یا مستطیل شکل باشند و در یک شبکه سازماندهی می‌شوند. هر کاشی بزرگ‌نمایی و مختصات جغرافیایی خاص خود را دارد و به طور مستقل قابل دانلود است. به عنوان مثال، در بزرگنمایی صفر (کمترین حالت ممکن بزرگنمایی)، کل نقشه‌ی جهان در یک کاشی قابل دانلود است. با یک‌بار زوم کردن روی نقشه، وارد بزرگنمایی یک می‌شویم، که در آن کل نقشه‌ی جهان، به ۴ کاشی تقسیم شده است، که با توجه به ناحیه‌ی قابل مشاهده‌ی کاربر تنها کاشی‌های قابل مشاهده لازم است دانلود شوند. به همین ترتیب، هر چه بزرگنمایی بیشتر شود، تعداد کاشی‌ها بیشتر می‌شود، ولی هر کدام از آن‌ها ناحیه‌ی کوچک‌تری را، با جزئیات بیشتر نمایش می‌دهد.

**مزایای کاشی‌کاری نقشه:**

- **بارگذاری سریع‌تر:** به جای کل نقشه، فقط کاشی‌های مربوط به ناحیه قابل مشاهده کاربر دانلود می‌شوند. این امر باعث می‌شود نقشه سریع‌تر بارگذاری شود و کاربر بتواند سریع‌تر با آن کار کند.
- **پیمایش روان:** با حرکت و زوم کردن روی نقشه، تنها کاشی‌های مورد نیاز دانلود می‌شوند. این باعث می‌شود پیمایش و زوم کردن روی نقشه روان و بدون وقفه انجام شود.
- **مصرف کمتر حافظه:** برنامه‌های کاربردی فقط کاشی‌های قابل مشاهده را در حافظه نگه می‌دارند، که منجر به استفاده کارآمدتر از حافظه دستگاه کاربر می‌شود.
- **کشینگ مؤثر:** مرورگرها می‌توانند کاشی‌های دانلود شده را کش کنند. بدین صورت، هنگام بازدید مجدد از همان ناحیه، نیازی به دانلود مجدد کاشی‌ها نخواهد بود.

کتابخانه‌ی Leaflet به صورت پیش‌فرض از سرویس آنلاین OpenStreetMap استفاده می‌کند، که نقشه‌ی جهان را به صورت رایگان ارائه می‌دهد. با اتصال به این سرویس، کتابخانه‌ی Leaflet، کاشی‌های نقشه ناحیه‌ی قابل مشاهده کاربر را دانلود کرده و نمایش می‌دهد. با این وجود، برای استفاده از سرویس آنلاین OpenStreetMap نیاز است دستگاه کاربر، به شبکه‌ی اینترنت متصل باشد، که قطعا به خصوص در محیط‌های عملیاتی، امکان‌پذیر نیست.

برای ارائه‌ی نقشه به کاربر، بدون اتصال به اینترنت، نیازمند این هستیم که کاشی‌های مورد نیاز کاربر را پیشاپیش دانلود کرده و با شبیه‌سازی سرویس آنلاین OpenStreetMap، در زمان لازم آن‌ها را به Leaflet ارائه دهیم.

برای انجام این کار، با استفاده از یک برنامه‌ی متن باز، به نام wms-tiles-downloader، کاشی‌های نقشه‌ی سرتاسر جهان را در بزرگنمایی‌های صفر تا ۵ دانلود کردیم. با توجه به این‌که با افزایش بزرگنمایی، تعداد کاشی‌ها (و متناسب با آن، حجم فایل‌ها) به صورت نمایی زیاد می‌شود، امکان دانلود کل نقشه‌ی جهان در تمامی بزرگنمایی‌ها و قرار دادن آن در دستگاه کاربر وجود ندارد. با این وجود، برای امکان استفاده از نقشه در سامانه، کاشی‌های نقشه‌ی کشور ایران، تا بزرگنمایی ۱۱ دانلود شد تا کاربر بتواند روی نقشه، بر روی کشور ایران، میزان بیشتری زوم کند.

پس از این، نیازمند این بودیم که بتوانیم کاشی‌های دانلود شده را مشابه سرویس OpenStreetMap ارائه دهیم. برای این‌کار، یک وب‌سرور ساده با استفاده از امکانات زبان Python پیاده کردیم. از طرف دیگر، در کد‌های مربوط به بخش رابط کاربری، روی نقشه‌ی ارائه شده توسط Leaflet دو لایه نقشه اضافه کردیم، که یکی نقشه‌ی تمامی جهان را تا بزرگنمایی ۵، و دیگری نقشه‌ی ایران را تا بزرگنمایی ۱۱ نمایش مي‌دهد. با انداختن این دو لایه روی هم، کاربر کل نقشه‌ی جهان را می‌بیند، و اگر در حال دیدن محدوده‌ی کشور ایران باشد، می‌تواند با زوم کردن بیشتر، نقشه را با دقت بیشتری نیز ببیند.

فایل‌های دانلود شده به همراه وب‌سرور ارائه‌دهنده‌ی آن‌ها، با استفاده از docker در یک docker image قرار گرفتند تا بتوان آن‌ها را به همراه بخش‌های دیگر سامانه به سادگی روی دستگاه کاربر اجرا کرد.
